<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Akreditif Başvuru Formu</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <main class="container">
    <header class="page-header">
      <h1>Akreditif Başvuru Formu</h1>
      <p class="hint">M = Zorunlu, O = Tercihli. Uygun olmayan alanlar boş bırakılmalıdır.</p>
      <nav class="topnav">
        <a href="index.html">Başvuru Formu</a>
        <a href="mt700.html">MT700 Formu</a>
      </nav>
    </header>

    <form id="lcForm" novalidate>
      <!-- 27 - Teklif ve ekleri (adet olarak) [M] -->
      <section class="field-group">
        <label for="f27"><span class="req">M</span> 27 - Teklif ve ekleri (adet olarak)</label>
        <input id="f27" name="f27" type="text" inputmode="numeric" pattern="\\s*\\d+\\s*\/\\s*\\d+\\s*" value="1/1" placeholder="örn: 1/3" required />
        <small>1/1: yalnız Başvuru Formu. 1/2, 1 form + 1 ek sayfa; 1/3, 1 form + 2 ek sayfa.</small>
      </section>

      <!-- 27 - Ek Sayfalar Ayrımı (MT701 ve diğer ekler) -->
      <section id="sec27" class="field-group hidden">
        <label>27 - Ek Sayfalar</label>
        <div id="attachmentsList"></div>
        <div class="grid-3">
          <select id="attRelated">
            <option value="45A">45A - Mal Tanımı</option>
            <option value="46A">46A - Gerekli Belgeler</option>
            <option value="47A">47A - İlave Şartlar</option>
            <option value="OTHER">Diğer/Proforma</option>
          </select>
          <input id="attTitle" type="text" placeholder="Ek başlığı veya kısa açıklama" />
          <button type="button" id="addAttachment">Ek Ekle</button>
        </div>
        <small>1/1'den farklı ise burada ek sayfaları listeleyin. Her ek sayfa için ayrı dosya yükleyin (PDF/Word/Excel/Görsel/TXT).</small>
        <input type="hidden" id="f27_list" name="f27_list" />
      </section>

      <!-- 40A - Akreditifin Formu [M] -->
      <section class="field-group">
        <label for="f40A"><span class="req">M</span> 40A - Akreditifin Formu</label>
        <select id="f40A" name="f40A" required>
          <option value="">Seçiniz</option>
          <option>AT SIGHT</option>
          <option>IRREVOCABLE</option>
          <option>TRANSFERABLE</option>
          <option>STANDBY</option>
          <option>BACK TO BACK</option>
          <option>REVOLVING</option>
          <option>ACCEPTANCE</option>
          <option>DEFERRED PAYMENT</option>
          <option>RED-CLAUSE</option>
        </select>
        <small>Bu alana akreditifin yapısal türü yazılır.</small>
      </section>

      <!-- 20 - Akreditif numarası [M but left blank] -->
      <section class="field-group">
        <label for="f20"><span class="req">M</span> 20 - Akreditif numarası</label>
        <input id="f20" name="f20" type="text" placeholder="Bu alan boş bırakılır" />
      </section>

      <!-- 23 - (Boş) [O] -->
      <section class="field-group">
        <label for="f23"><span class="opt">O</span> 23</label>
        <input id="f23" name="f23" type="text" placeholder="Bu alan boş bırakılır" />
      </section>

      <!-- 31C - Düzenlenme tarihi [M but left blank] -->
      <section class="field-group">
        <label for="f31C"><span class="req">M</span> 31C - Düzenlenme tarihi</label>
        <input id="f31C" name="f31C" type="date" placeholder="Tarih seçin" />
      </section>

      <!-- 40E - Uygulanacak kurallar [M] -->
      <section class="field-group">
        <label for="f40E"><span class="req">M</span> 40E - Uygulanacak kurallar</label>
        <select id="f40E" name="f40E" required>
          <option value="">Seçiniz</option>
          <option>UCP LATEST VERSION</option>
          <option>EUCP LATEST VERSION</option>
          <option value="OTHER">OTHER</option>
        </select>
        <input id="f40E_other" name="f40E_other" type="text" class="hidden" placeholder="Diğer kuralı yazınız" />
        <small>Not: UCP, ICC'nin akreditiflere ilişkin yeknesak kurallarıdır.</small>
      </section>

      <!-- 31D - Akreditifin vadesi [M] -->
      <section class="field-group">
        <label for="f31D"><span class="req">M</span> 31D - Akreditifin vadesi (Place of Expiry)</label>
        <input id="f31D" name="f31D" type="date" required />
        <small>Tarih seçin (PDF'de YYMMDD formatında görünecek)</small>
      </section>

      <!-- 51a - Amir/Alıcının bankası [O] -->
      <section class="field-group">
        <label for="f51a"><span class="opt">O</span> 51a - Amir/Alıcının bankası</label>
        <input id="f51a" name="f51a" type="text" placeholder="SWIFT kodu veya banka adı" />
      </section>

      <!-- 50 - Amir/Alıcı [M] -->
      <section class="field-group">
        <label for="f50"><span class="req">M</span> 50 - Amir/Alıcı</label>
        <textarea id="f50" name="f50" required placeholder="Tam isim ve adres"></textarea>
        <small>Resmi ticari unvanı ve posta adresini tam yazın. Ülke adı ve iletişim bilgileri (tel/faks/e-posta) varsa ekleyin.</small>
      </section>

      <!-- 59 - Lehtar/Satıcı [M] -->
      <section class="field-group">
        <label for="f59"><span class="req">M</span> 59 - Lehtar/Satıcı</label>
        <textarea id="f59" name="f59" required placeholder="Tam isim ve adres"></textarea>
        <small>Lehtarın ticari unvanı ve adresi. İmza yetkilisi ve IBAN/Vergi No bilgilerini eklemek süreci hızlandırır.</small>
      </section>

      <!-- 32B - Para Cinsi ve Tutarı [M] -->
      <section class="grid-2 field-group">
        <div>
          <label for="f32B_ccy"><span class="req">M</span> 32B - Para Cinsi</label>
          <input id="f32B_ccy" name="f32B_ccy" type="text" maxlength="3" placeholder="USD, EUR..." required />
          <small>ISO para kodu (3 harf: USD, EUR, TRY). Büyük harfle yazınız.</small>
        </div>
        <div>
          <label for="f32B_amt"><span class="req">M</span> 32B - Tutar</label>
          <input id="f32B_amt" name="f32B_amt" type="number" min="0" step="0.01" required />
          <small>Ondalık ayırıcı nokta, binlik ayırıcı kullanmayın. Tolerans hariç net tutar.</small>
        </div>
      </section>

      <!-- 39A/B/C [O] -->
      <section class="grid-3 field-group">
        <div>
          <label for="f39A"><span class="opt">O</span> 39A - Tolerans (+/-)</label>
          <input id="f39A" name="f39A" type="text" placeholder="10/10" />
        </div>
        <div>
          <label for="f39B"><span class="opt">O</span> 39B - Maksimum Tutar</label>
          <input id="f39B" name="f39B" type="number" min="0" step="0.01" />
        </div>
        <div>
          <label for="f39C"><span class="opt">O</span> 39C - İlave Dahili Tutarlar</label>
          <input id="f39C" name="f39C" type="text" placeholder="navlun, sigorta, faiz..." />
        </div>
      </section>

      <!-- 41a - Kullanımda Olacağı Banka/Görev [M] -->
      <section class="grid-2 field-group">
        <div>
          <label for="f41a_bank"><span class="req">M</span> 41a - Banka</label>
          <input id="f41a_bank" name="f41a_bank" type="text" required placeholder="Banka adı veya SWIFT" />
        </div>
        <div>
          <label for="f41a_role"><span class="req">M</span> 41a - Görev</label>
          <select id="f41a_role" name="f41a_role" required>
            <option value="">Seçiniz</option>
            <option value="BY PAYMENT">BY PAYMENT (İbrazda Ödeme)</option>
            <option value="BY DEF PAYMENT">BY DEF PAYMENT (Vadeli Ödeme)</option>
            <option value="BY ACCEPTANCE">BY ACCEPTANCE (Kabul)</option>
            <option value="BY NEGOTIATION">BY NEGOTIATION (İştira)</option>
            <option value="BY MIX PAYMENT">BY MIX PAYMENT (Karışık Ödeme)</option>
          </select>
        </div>
      </section>

      <!-- 42C - Poliçe vadesi [O] -->
      <section class="field-group" data-conditional="role:BY DEF PAYMENT,role:BY ACCEPTANCE,role:BY NEGOTIATION,role:BY MIX PAYMENT">
        <label><span class="opt">O</span> 42C - Poliçe vadesi</label>
        <div class="grid-3">
          <select id="f42C_hasMaturity">
            <option value="">Vade durumu</option>
            <option value="NO">Vade yok</option>
            <option value="YES">Vade var</option>
          </select>
          <select id="f42C_select_no" class="hidden">
            <option value="">Seçiniz</option>
            <option value="SIGHT">SIGHT</option>
            <option value="AT SIGHT">AT SIGHT</option>
          </select>
          <div id="f42C_var_box" class="hidden">
            <select id="f42C_select">
              <option value="">Seçiniz</option>
              <option value="30 DAYS FROM B/L DATE">30 DAYS FROM B/L DATE</option>
              <option value="60 DAYS FROM B/L DATE">60 DAYS FROM B/L DATE</option>
              <option value="90 DAYS FROM B/L DATE">90 DAYS FROM B/L DATE</option>
              <option value="30 DAYS AFTER B/L DATE">30 DAYS AFTER B/L DATE</option>
              <option value="60 DAYS AFTER B/L DATE">60 DAYS AFTER B/L DATE</option>
              <option value="90 DAYS AFTER B/L DATE">90 DAYS AFTER B/L DATE</option>
              <option value="30 DAYS FROM INVOICE DATE">30 DAYS FROM INVOICE DATE</option>
              <option value="OTHER">OTHER</option>
            </select>
          </div>
        </div>
        <input id="f42C_other" type="text" class="hidden" placeholder="Serbest giriş: örn. 45 DAYS FROM SHIPMENT DATE" />
        <input id="f42C" name="f42C" type="hidden" />
        <small>Vade yoksa SIGHT/AT SIGHT seçin. Vadeli ise listedeki seçeneklerden biri veya OTHER ile serbest giriş yapın.</small>
      </section>

      <!-- 42a - Poliçenin Üzerine Çekileceği Taraf [O] -->
      <section class="field-group" data-conditional="role:BY DEF PAYMENT,role:BY ACCEPTANCE,role:BY NEGOTIATION,role:BY MIX PAYMENT">
        <label><span class="opt">O</span> 42a - Poliçenin Üzerine Çekileceği Taraf</label>
        <div class="grid-3">
          <div>
            <label for="f42a_confirm">Teyit</label>
            <select id="f42a_confirm" name="f42a_confirm">
              <option value="">Seçiniz</option>
              <option value="CONFIRMING">Teyit Var</option>
              <option value="NON-CONFIRMING">Teyit Yok</option>
            </select>
          </div>
          <div>
            <label for="f42a_source">Drawee Kaynağı</label>
            <select id="f42a_source">
              <option value="">Seçiniz</option>
              <option value="CONFIRMATION">Teyit Bankası (58a)</option>
              <option value="APPLICANT">Amir Banka (51a)</option>
              <option value="NOMINATED">Görevli/Nominated Banka (41a)</option>
            </select>
          </div>
          <div>
            <label for="f42a_drawee">Drawee</label>
            <input id="f42a_drawee" name="f42a_drawee" type="text" placeholder="SWIFT kodu veya banka adı" />
          </div>
        </div>
        <small>Teyit varsa genelde teyit bankası; yoksa amir banka. Bazı durumlarda teyit olmasa da görevli (41a) banka yazılabilir.</small>
      </section>

      <!-- 42M - Karışık Ödeme Detayları [O] -->
      <section id="sec42M" class="field-group hidden">
        <label><span class="opt">O</span> 42M - Karışık Ödemenin Detayları</label>
        <div id="mixList"></div>
        <div class="grid-3">
          <input id="mixPercent" type="number" min="1" max="100" step="1" placeholder="%" />
          <select id="mixType">
            <option value="BY PAYMENT">BY PAYMENT</option>
            <option value="BY DEF PAYMENT">BY DEF PAYMENT</option>
            <option value="BY ACCEPTANCE">BY ACCEPTANCE</option>
            <option value="BY NEGOTIATION">BY NEGOTIATION</option>
            <option value="RED CLAUSE">RED CLAUSE</option>
            <option value="GREEN CLAUSE">GREEN CLAUSE</option>
            <option value="IN ADVANCE">IN ADVANCE</option>
          </select>
          <button type="button" id="addMix">Satır Ekle</button>
        </div>
        <small>Örnek: %20 BY PAYMENT, %30 BY DEF PAYMENT, %40 BY ACCEPTANCE, %10 RED CLAUSE. Toplam: <b id="mixSum">0%</b></small>
        <input type="hidden" id="f42M" name="f42M" />
      </section>

      <!-- 42P - İştira/Vadeli Akreditif Detayları [O] -->
      <section id="sec42P" class="field-group hidden">
        <label for="f42P"><span class="opt">O</span> 42P - İştira/Vadeli Akreditif Detayları</label>
        <input id="f42P" name="f42P" type="text" placeholder="90 DAYS FROM BILL OF LADING DATE" />
      </section>

      <!-- 43P - Kısmi Yüklemeler [O] -->
      <section class="field-group">
        <label for="f43P"><span class="opt">O</span> 43P - Kısmi Yüklemeler</label>
        <select id="f43P" name="f43P">
          <option value="">Seçiniz</option>
          <option>İzin var</option>
          <option>İzin yok</option>
          <option>Şartlı izin var</option>
        </select>
        <small>Kısmi yüklemeye izin verilip verilmeyeceğini belirtir. "İzin var" seçilirse birden fazla sevkiyat yapılabilir.</small>
      </section>

      <!-- 43T - Aktarma [O] -->
      <section class="field-group">
        <label for="f43T"><span class="opt">O</span> 43T - Aktarma</label>
        <select id="f43T" name="f43T">
          <option value="">Seçiniz</option>
          <option value="İzin var">İzin var</option>
          <option value="İzin yok">İzin yok</option>
          <option value="Şartlı izin var">Şartlı izin var</option>
        </select>
        <small>Akreditif konusu sevkiyat yolda araç değiştirebilecekse bu alana "izin var" veya "izin yok" veya "şartlı izin var" şeklinde yazılır. Şartlı izin var bilgisi yazılmışsa şartı burada veya 47A alanında verilmesi gerekir.</small>
      </section>

      <!-- 44A/44E/44F/44B [O] -->
      <section class="grid-2 field-group">
        <div>
          <label for="f44A"><span class="opt">O</span> 44A - Malı Teslim Alma Yeri (çıkış)</label>
          <input id="f44A" name="f44A" type="text" placeholder="GAZIANTEP/KAYSERI/ANKARA" />
        </div>
        <div>
          <label for="f44E"><span class="opt">O</span> 44E - Yükleme Limanı/Havalimanı</label>
          <input id="f44E" name="f44E" type="text" placeholder="MERSİN, İZMİR, PIRE" />
        </div>
      </section>
      <section class="grid-2 field-group">
        <div>
          <label for="f44F"><span class="opt">O</span> 44F - Boşaltma Limanı/Varış Limanı</label>
          <input id="f44F" name="f44F" type="text" placeholder="PIRE, MARSILYA, HAMBURG" />
        </div>
        <div>
          <label for="f44B"><span class="opt">O</span> 44B - Teslim Etme Yeri (varış)</label>
          <input id="f44B" name="f44B" type="text" placeholder="BASEL/MUNCHEN/PARIS" />
        </div>
      </section>

      <!-- 44C - Son Yükleme Tarihi [O] -->
      <section class="field-group">
        <label for="f44C"><span class="opt">O</span> 44C - Son Yükleme Tarihi</label>
        <input id="f44C" name="f44C" type="date" />
        <small>Tarih seçin (PDF'de YYMMDD formatında görünecek)</small>
      </section>

      <!-- 44D - Yükleme Süresi [O] -->
      <section class="field-group">
        <label for="f44D"><span class="opt">O</span> 44D - Yükleme Süresi/Periyodu</label>
        <input id="f44D" name="f44D" type="text" placeholder="NOT EARLIER THAN 071120 AND NOT LATER THAN 071122" />
      </section>

      <!-- 45A - Mal ve Hizmetlerin Tanımı [O] -->
      <section class="field-group">
        <label for="f45A"><span class="opt">O</span> 45A - Mal ve Hizmetlerin Tanımı</label>
        <textarea id="f45A" name="f45A" placeholder="Detaylı açıklama"></textarea>
      </section>

      <!-- 46A - Gerekli Belgeler [O] -->
      <section class="field-group">
        <label for="f46A"><span class="opt">O</span> 46A - Gerekli Belgeler</label>
        <textarea id="f46A" name="f46A" placeholder="Ör: SIGNED COMMERCIAL INVOICE IN 5 FOLDS..."></textarea>
      </section>

      <!-- 47A - İlave Şartlar [O] -->
      <section class="field-group">
        <label for="f47A"><span class="opt">O</span> 47A - İlave Şartlar</label>
        <textarea id="f47A" name="f47A" placeholder="Ek şartlar ve koşullar..."></textarea>
      </section>

      <!-- 49G/H [O] -->
      <section class="grid-2 field-group">
        <div>
          <label for="f49G"><span class="opt">O</span> 49G - Lehtar için Özel Ödeme Şartları</label>
          <textarea id="f49G" name="f49G" placeholder="Postfinansman/iskonto şartları"></textarea>
        </div>
        <div>
          <label for="f49H"><span class="opt">O</span> 49H - Alan Banka için Özel Ödeme Şartları</label>
          <textarea id="f49H" name="f49H" placeholder="Banka için özel şartlar"></textarea>
        </div>
      </section>

      <!-- 71D - Masraflar [O] -->
      <section class="field-group">
        <label for="f71D"><span class="opt">O</span> 71D - Masraflar</label>
        <textarea id="f71D" name="f71D" placeholder="ALL CHARGES OUTSIDE OUR OFFICE..."></textarea>
      </section>

      <!-- 48 - İbraz süresi [O] -->
      <section class="field-group">
        <label for="f48"><span class="opt">O</span> 48 - İbraz süresi (gün)</label>
        <input id="f48" name="f48" type="number" min="1" step="1" placeholder="Boşsa 21 gün kabul edilir" />
      </section>

      <!-- 49 - Teyit Talimatı [M] -->
      <section class="field-group">
        <label for="f49"><span class="req">M</span> 49 - Teyit Talimatı</label>
        <select id="f49" name="f49" required>
          <option value="">Seçiniz</option>
          <option value="WITHOUT">WITHOUT</option>
          <option value="CONFIRM">CONFIRM</option>
          <option value="MAY ADD">MAY ADD</option>
        </select>
        <small>
          Akreditife başka bir bankanın teyit verip vermeyeceğini belirtir.
          Teyit isteniyorsa “Teyitli” (CONFIRM), istenmiyorsa “Teyitsiz” (WITHOUT) seçiniz.
          Masrafları lehtar öderse teyit eklenebilsin isteniyorsa “MAY ADD” seçiniz.
          Örnekler: WITHOUT / CONFIRM / MAY ADD
        </small>
      </section>

      <!-- 58a - Teyit Talep Edilen Taraf [O] -->
      <section class="field-group">
        <label for="f58a"><span class="opt">O</span> 58a - Teyit Talep Edilen Taraf</label>
        <input id="f58a" name="f58a" type="text" placeholder="Banka adı veya SWIFT" />
      </section>

      <!-- 57a - İkinci İhbar Bankası [O] -->
      <section class="field-group">
        <label for="f57a"><span class="opt">O</span> 57a - İkinci İhbar Bankası</label>
        <input id="f57a" name="f57a" type="text" placeholder="Banka adı veya SWIFT" />
      </section>

      <footer class="form-actions">
        <button type="submit">Kaydet</button>
        <button type="reset" class="secondary">Temizle</button>
        <button type="button" id="demoBtn" class="secondary">Demo Veri</button>
        <button type="button" id="pdfBtn">PDF Önizleme</button>
        <button type="button" id="aiCheckBtn" class="ai-check">AI Kontrol</button>
      </footer>
      
      <!-- API Key Configuration -->
      <div class="api-config" style="margin-top: 20px; padding: 15px; background: #1e293b; border-radius: 8px; border: 1px solid #334155;">
        <h4 style="margin: 0 0 10px; color: #e2e8f0;">OpenAI API Key Ayarları</h4>
        <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 10px;">
          <span id="apiKeyStatus" style="color: #94a3b8; font-size: 12px;">API Key durumu kontrol ediliyor...</span>
          <a href="admin.html" style="background: #7c3aed; color: white; padding: 6px 12px; border-radius: 4px; text-decoration: none; font-size: 12px;">🔐 Admin Panel</a>
        </div>
        <div style="background: #0f172a; padding: 8px; border-radius: 6px; font-family: monospace; font-size: 12px; color: #94a3b8;">
          API Key: <span id="apiKeyDisplay">Yükleniyor...</span>
        </div>
        <div style="margin-top: 8px; font-size: 11px; color: #64748b;">
          💡 Varsayılan API Key kullanılıyor. Kendi API Key'inizi kullanmak için Admin Panel'e giriş yapın (admin/12345)
        </div>
      </div>
    </form>
  </main>

  <script src="config.js"></script>
  <script src="script.js"></script>
  <script>
    // Enhance date inputs to accept DD.MM.YYYY and convert to YYMMDD
  </script>
</body>
</html>


